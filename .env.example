# ============================================================
# TASKER BACKEND - ENVIRONMENT CONFIGURATION TEMPLATE
# ============================================================
# Copy this file to .env and fill in your actual values.
# NEVER commit .env to version control!
#
# Quick Setup:
#   1. cp .env.example .env
#   2. Fill in values below
#   3. npm run dev
# ============================================================

# ------------------------------------------------------------
# SERVER CONFIGURATION
# ------------------------------------------------------------
# Environment: development | production | test
NODE_ENV=development

# Server port (default: 3000)
PORT=3000

# ------------------------------------------------------------
# FIREBASE CONFIGURATION
# ------------------------------------------------------------
# Get these from: Firebase Console > Project Settings

# Project ID (required)
FIREBASE_PROJECT_ID=your-project-id

# Option 1: Service Account File (recommended for local development)
# Download from: Firebase Console > Project Settings > Service Accounts
FIREBASE_SERVICE_ACCOUNT_PATH=./serviceAccountKey.json

# Option 2: Environment Variables (recommended for production/cloud)
# Extract from your service account JSON file
# FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nYOUR_KEY_HERE\n-----END PRIVATE KEY-----\n"
# FIREBASE_CLIENT_EMAIL=firebase-adminsdk-xxxxx@your-project.iam.gserviceaccount.com

# Optional: Firebase Web Config (for client-side if needed)
# FIREBASE_API_KEY=your-api-key
# FIREBASE_AUTH_DOMAIN=your-project.firebaseapp.com
# FIREBASE_STORAGE_BUCKET=your-project.appspot.com
# FIREBASE_MESSAGING_SENDER_ID=123456789
# FIREBASE_APP_ID=1:123456789:web:abcdef
# FIREBASE_MEASUREMENT_ID=G-XXXXXXXXXX

# ------------------------------------------------------------
# ZOHO CLIQ CONFIGURATION
# ------------------------------------------------------------
# Docs: https://www.zoho.com/cliq/help/restapi/v2/

# Bot unique name (must match your bot in Cliq)
CLIQ_BOT_UNIQUE_NAME=taskerbot

# Webhook Token
# Get from: Cliq Admin Console > Bots & Tools > Webhook Tokens
CLIQ_WEBHOOK_TOKEN=1001.xxxxx.xxxxx

# Bot Webhook URL (for sending messages TO your bot)
# Format: https://cliq.zoho.com/api/v2/bots/{bot-name}/incoming?zapikey={token}
CLIQ_WEBHOOK_URL=https://cliq.zoho.com/api/v2/bots/taskerbot/incoming?zapikey=YOUR_WEBHOOK_TOKEN

# Channel Webhook URL (optional - for posting to channels)
# Format: https://cliq.zoho.com/api/v2/channelsbyname/{channel-name}/message?zapikey={token}
# CLIQ_CHANNEL_WEBHOOK_URL=https://cliq.zoho.com/api/v2/channelsbyname/general/message?zapikey=YOUR_WEBHOOK_TOKEN

# Cliq OAuth Credentials (for Zoho API access)
# Get from: Zoho API Console (api-console.zoho.com) > Self Client
CLIQ_CLIENT_ID=1000.YOUR_CLIENT_ID
CLIQ_CLIENT_SECRET=your-client-secret

# ------------------------------------------------------------
# API AUTHENTICATION
# ------------------------------------------------------------
# Secret key for API authentication (sent via x-api-key header)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
API_SECRET_KEY=generate-a-64-char-hex-key-here

# ------------------------------------------------------------
# OAUTH 2.0 CONFIGURATION
# ------------------------------------------------------------
# For user authentication with Zoho accounts
# Uses same credentials as CLIQ_CLIENT_ID/SECRET

OAUTH_CLIENT_ID=1000.YOUR_CLIENT_ID
OAUTH_CLIENT_SECRET=your-client-secret
OAUTH_CALLBACK_URL=http://localhost:3000/api/auth/callback

# Zoho OAuth endpoints (don't change unless using different region)
OAUTH_AUTHORIZATION_URL=https://accounts.zoho.com/oauth/v2/auth
OAUTH_TOKEN_URL=https://accounts.zoho.com/oauth/v2/token
OAUTH_USER_INFO_URL=https://accounts.zoho.com/oauth/user/info

# ------------------------------------------------------------
# JWT CONFIGURATION
# ------------------------------------------------------------
# Used for issuing tokens to authenticated users
# Generate secrets: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"

# Access token (short-lived for API calls)
JWT_SECRET=generate-a-128-char-hex-secret-here
JWT_EXPIRES_IN=7d

# Refresh token (long-lived for getting new access tokens)
JWT_REFRESH_SECRET=generate-another-128-char-hex-secret-here
JWT_REFRESH_EXPIRES_IN=30d

# Session secret (for express-session middleware)
SESSION_SECRET=generate-another-128-char-hex-secret-here

# ------------------------------------------------------------
# FRONTEND CONFIGURATION
# ------------------------------------------------------------
# URL for OAuth redirects and CORS origins
FRONTEND_URL=http://localhost:3000

# ------------------------------------------------------------
# RATE LIMITING
# ------------------------------------------------------------
# Protect API from abuse
# Window in ms (900000 = 15 minutes)
RATE_LIMIT_WINDOW_MS=900000

# Max requests per window per IP
RATE_LIMIT_MAX_REQUESTS=100

# ------------------------------------------------------------
# LOGGING
# ------------------------------------------------------------
# Log levels: error | warn | info | debug
# Use 'debug' for development, 'info' or 'warn' for production
LOG_LEVEL=info
